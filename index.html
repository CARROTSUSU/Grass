<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grass Simulator - Futuristic Farming</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <div class="container">
    <h1>Grass Simulator - Futuristic Farming</h1>

    <p id="currency" class="info">Currency: 0 Credits</p>
    <p id="grassCount" class="info">Grass: 0</p>
    <p id="timer" class="info">Next Grass Growth: 5s</p>
    <p id="ggGems" class="info">GG (GAME LOCK): 0</p>

    <table class="item-table">
      <thead>
        <tr>
          <th>Item</th>
          <th>Price</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Grass</td>
          <td>1000/1</td>
          <td>
            <button class="btn" onclick="buyGrassWithGG()">Buy</button>
            <button class="btn" onclick="sellItem('Grass', 200)">Sell</button>
          </td>
        </tr>
        <tr>
          <td>EXCHANGE GG TO CREDITS</td>
          <td>-</td>
          <td>
            <button class="btn" onclick="convertGGToCredits()">Convert</button>
          </td>
        </tr>
        <tr>
          <td>Admin Add Grass</td>
          <td>-</td>
          <td>
            <button class="btn" onclick="adminAddGrass()">Add Grass</button>
          </td>
        </tr>
        <tr>
          <td>Reset</td>
          <td>-</td>
          <td>
            <button class="btn" onclick="reset()">Reset</button>
          </td>
        </tr>
        <tr>
          <td>Admin Reset Semua</td>
          <td>-</td>
          <td>
            <button class="btn" onclick="adminResetAll()">Admin Reset Semua</button>
          </td>
        </tr>
      </tbody>
    </table>

    <p id="status" class="info">Status: Stay ALIVE</p>
    <button id="aliveBtn" class="btn" onclick="toggleAlive()">Stay ALIVE</button>
  </div>

  <script>
    let currency = parseInt(localStorage.getItem('currency')) || 0;
    let ggGems = parseInt(localStorage.getItem('ggGems')) || 0;
    let grassCount = parseInt(localStorage.getItem('grassCount')) || 0;
    let grassGrowthRate = 0.01;
    let grassGrowthTime = 5;
    let isAlive = localStorage.getItem('isAlive') === 'true'; // Cek status hidup dari localStorage

    // Update display
    function updateDisplay() {
  document.getElementById('currency').textContent = `Currency: ${currency} Credits`;
  document.getElementById('grassCount').textContent = `Grass: ${grassCount}`;  // Ini memastikan grassCount ditampilkan
  document.getElementById('timer').textContent = `Next Grass Growth: ${grassGrowthTime}s`;
  document.getElementById('ggGems').textContent = `GG GAME GEMS: ${ggGems}`;
}


    // Grass growth mechanism
    function growGrass() {
      setInterval(() => {
        if (isAlive) { // Only grow grass if the player is alive
          if (grassGrowthTime > 0) {
            grassGrowthTime--;
            updateDisplay();
          } else {
            if (grassCount >= 1000) {
              grassGrowthRate = 0.5;
            } else if (grassCount >= 200) {
              grassGrowthRate = 0.1;
            }
            grassCount += grassGrowthRate;
            grassGrowthTime = 5;
            localStorage.setItem('grassCount', grassCount); // Save the updated grassCount
            updateDisplay();
          }
        }
      }, 1000);
    }

    // Buy Grass with GG
    function buyGrassWithGG() {
      const priceInGG = 1;  // 1 GG Game Gem untuk 200 rumput
      const grassToBuy = 200;

      if (ggGems >= priceInGG) {  // Mengecek apakah GG cukup
        ggGems -= priceInGG;  // Mengurangi GG Game Gems
        grassCount += grassToBuy;  // Menambah rumput
        localStorage.setItem('ggGems', ggGems);
        localStorage.setItem('grassCount', grassCount);
        alert(`You bought ${grassToBuy} for grass with 1 GG.`);
        updateDisplay();
      } else {
        alert('You do not have enough GG');
      }
    }

    // Selling items and converting them into GG Game Gems
    function sellItem(item, price) {
      const sellRate = 1000;  // 1000 grass for 1 GG Game Gem

      if (grassCount >= sellRate) {  // Check if you have enough grass
        const ggGemsEarned = Math.floor(grassCount / sellRate);  // Calculate how many GG Gems you will earn
        grassCount -= ggGemsEarned * sellRate;  // Deduct the amount of grass sold
        ggGems += ggGemsEarned;  // Add the earned GG Gems
        localStorage.setItem('ggGems', ggGems);  // Save the updated GG Gems in localStorage
        localStorage.setItem('grassCount', grassCount);  // Save the updated grass count in localStorage
        alert(`You sold ${ggGemsEarned * sellRate} ${item} for ${ggGemsEarned} GG Game Gems.`);  // Success message
        updateDisplay();  // Update the display
      } else {
        alert('You do not have enough grass to sell.');  // Warning message if not enough grass
      }
    }

    // Convert GG to Credits
    function convertGGToCredits() {
      const conversionRate = 2000;  // 1 GG Game Gem = 100 Credits
      if (ggGems >= 1) {  // Mengecek apakah ada GG Game Gems untuk dikonversi
        const creditsToConvert = ggGems * conversionRate;  // Menghitung jumlah Credits yang akan diperoleh
        currency += creditsToConvert;  // Menambah Credits
        ggGems = 0;  // Mengosongkan GG Gems setelah konversi
        localStorage.setItem('currency', currency);  // Menyimpan Credits yang diperbarui
        localStorage.setItem('ggGems', ggGems);  // Menyimpan GG Gems yang diperbarui (jadi 0)
        alert(`You Get ${creditsToConvert} CREDITS From Swap!`);  // Menampilkan pesan sukses
        updateDisplay();  // Memperbarui tampilan
      } else {
        alert('You dont have enough GG to Exchange.');  // Pesan jika tidak cukup GG Game Gems
      }
    }

    // Admin function to add grass
    function adminAddGrass() {
      const adminPassword = "admin123";
      const enteredPassword = prompt("Please enter the admin password to add grass:");

      if (enteredPassword === adminPassword) {
        const amountToAdd = 500;
        grassCount += amountToAdd;
        localStorage.setItem('grassCount', grassCount);
        alert(`${amountToAdd} grass has been added!`);
        updateDisplay();
      } else {
        alert('Incorrect password! You are not authorized to add grass.');
      }
    }

    // Function to reset user data
    function reset() {
      grassCount = 0;
      currency = 0;
      ggGems = 0;
      localStorage.setItem('currency', currency);
      localStorage.setItem('grassCount', grassCount);
      localStorage.setItem('ggGems', ggGems);
      alert('Data has been reset!');
      updateDisplay();
    }

    // Admin function to reset all data
    function adminResetAll() {
      const adminPassword = "admin123";
      const enteredPassword = prompt("Enter admin password to reset everything:");

      if (enteredPassword === adminPassword) {
        grassCount = 0;
        currency = 0;
        ggGems = 0;
        localStorage.clear();  // Clear all data from localStorage
        alert('All data has been reset!');
        updateDisplay();
      } else {
        alert('Incorrect password! You do not have permission to reset everything.');
      }
    }

    // Initialize grass growth and display
    growGrass();
    updateDisplay();

    // Fungsi untuk memperbarui status
    function updateAliveStatus() {
      const statusElement = document.getElementById('status');
      const aliveBtn = document.getElementById('aliveBtn');
      
      if (isAlive) {
        statusElement.textContent = "Status: Stay ALIVE";
        aliveBtn.classList.remove('dead');
        aliveBtn.classList.add('alive');
      } else {
        statusElement.textContent = "Status: DEAD";
        aliveBtn.classList.remove('alive');
        aliveBtn.classList.add('dead');
      }
    }

    // Fungsi untuk toggle status hidup
    function toggleAlive() {
      isAlive = !isAlive; // Ubah status
      localStorage.setItem('isAlive', isAlive); // Simpan status ke localStorage
      updateAliveStatus(); // Perbarui tampilan
    }

    // Memperbarui tampilan status saat pertama kali dimuat
    updateAliveStatus();
    
  </script>

</body>
</html>
